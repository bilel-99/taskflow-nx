<div class="container">
  <header class="header">
    <h1>{{ title }}</h1>
    <p class="subtitle">Gérez vos tâches efficacement</p>
  </header>

  <div class="stats">
    <div class="stat-card">
      <span class="stat-number">{{ tasks.length }}</span>
      <span class="stat-label">Tâches totales</span>
    </div>
    <div class="stat-card pending">
      <span class="stat-number">{{ pendingTasks.length }}</span>
      <span class="stat-label">En cours</span>
    </div>
    <div class="stat-card completed">
      <span class="stat-number">{{ completedTasks.length }}</span>
      <span class="stat-label">Terminées</span>
    </div>
  </div>

  <div class="actions">
    <button class="btn-primary" (click)="toggleForm()">
      {{ showForm ? 'Annuler' : '+ Nouvelle tâche' }}
    </button>
  </div>

  <div class="form-container" *ngIf="showForm">
    <h2>Créer une nouvelle tâche</h2>
    <form (ngSubmit)="createTask()" #taskForm="ngForm">
      <div class="form-group">
        <label for="title">Titre *</label>
        <input
          type="text"
          id="title"
          name="title"
          [(ngModel)]="newTask.title"
          required
          placeholder="Titre de la tâche"
        />
      </div>

      <div class="form-group">
        <label for="description">Description *</label>
        <textarea
          id="description"
          name="description"
          [(ngModel)]="newTask.description"
          required
          rows="4"
          placeholder="Description détaillée de la tâche"
        ></textarea>
      </div>

      <div class="form-group">
        <label for="dueDate">Date d'échéance *</label>
        <input
          type="date"
          id="dueDate"
          name="dueDate"
          [(ngModel)]="newTask.dueDate"
          required
        />
      </div>

      <button type="submit" class="btn-primary" [disabled]="!taskForm.valid">
        Créer la tâche
      </button>
    </form>
  </div>

  <div class="tasks-section">
    <h2 *ngIf="pendingTasks.length > 0">
      Tâches en cours ({{ pendingTasks.length }})
    </h2>
    <div class="tasks-list" *ngIf="pendingTasks.length > 0">
      <lib-task-card
        *ngFor="let task of pendingTasks"
        [task]="task"
        (toggleComplete)="toggleTaskCompletion($event)"
        (deleteTask)="deleteTask($event)"
      ></lib-task-card>
    </div>

    <h2 *ngIf="completedTasks.length > 0" class="completed-header">
      Tâches terminées ({{ completedTasks.length }})
    </h2>
    <div class="tasks-list" *ngIf="completedTasks.length > 0">
      <lib-task-card
        *ngFor="let task of completedTasks"
        [task]="task"
        (toggleComplete)="toggleTaskCompletion($event)"
        (deleteTask)="deleteTask($event)"
      ></lib-task-card>
    </div>

    <div class="empty-state" *ngIf="tasks.length === 0">
      <p>Aucune tâche pour le moment</p>
      <p class="empty-hint">Cliquez sur "Nouvelle tâche" pour commencer</p>
    </div>
  </div>
</div>

<router-outlet></router-outlet>
